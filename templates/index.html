{% extends "base.html" %}
{# 
    Este template hereda la estructura base y el Navbar.
    Muestra la lista de talleres disponibles para la inscripción del estudiante.
#}

{% block content %}
<h2 class="mb-5 text-center fw-bold text-white">Inscribete a Nuestros Talleres de Formación</h2> 

<div class="row justify-content-center align-items-start g-4">
    {# Bucle de Jinja para iterar sobre la lista de talleres ('workshops') #}
    {% for workshop in workshops %}
    <div class="col-md-6 col-lg-4 mb-4">
        {# Tarjeta de Bootstrap: usa la clase 'card' personalizada en custom.css #}
        <div class="card h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
                
                {# SECCIÓN 1: ÍCONO DE CATEGORÍA #}
                <div class="text-center mb-3">
                    {% set cat = workshop.category|default('')|trim %}
                    
                    {% if cat == 'Tecnología' %}
                <i class="bi bi-terminal display-5 icon-tecnologia"></i>
                    {% elif cat in ['Programación','Programacion'] %}
                <i class="bi bi-cpu display-5 icon-programacion"></i>
                    {% elif cat == 'Habilidades Blandas' %}
                <i class="bi bi-person-check-fill display-5 icon-habilidades"></i>
                    {% elif cat == 'Negocios' %}
                <i class="bi bi-cash-coin display-5 icon-negocios"></i>
                    {% elif cat == 'Inglés' %}
                <i class="bi bi-translate display-5 icon-ingles"></i>
                    {% elif cat == 'Electricidad / Electrónica' %}
                <i class="bi bi-lightning-charge-fill display-5 icon-electricidad"></i>
                    {% elif cat == 'Hotelería / Turismo' %}
                <i class="bi bi-globe-americas display-5 icon-hoteleria"></i>
                    {% elif cat in ['Química','Quimica'] %}
                <i class="bi bi-flask display-5 icon-quimica"></i>
                    {% elif cat == 'Finanzas' %}
                <i class="bi bi-bank display-5 icon-finanzas"></i>
                    {% elif cat == 'Artes' %}
                <i class="bi bi-palette-fill display-5 icon-artes"></i>
                    {% endif %}
        </div>

                {# TÍTULO Y BADGE DE CATEGORÍA #}
                <h4 class="card-title text-center mb-1 fw-bold">{{ workshop.name }}</h4>
                
                <p class="text-center mb-3">
                    {% set cat = workshop.category|default('')|trim %}
                
                    {% if cat == 'Tecnología' %}
                <span class="badge badge-tecnologia">{{ cat }}</span>
                    {% elif cat in ['Programación','Programacion'] %}
                <span class="badge badge-programacion">{{ cat }}</span>
                    {% elif cat == 'Habilidades Blandas' %}
                <span class="badge badge-habilidades">{{ cat }}</span>
                    {% elif cat == 'Negocios' %}
                <span class="badge badge-negocios">{{ cat }}</span>
                    {% elif cat == 'Inglés' %}
                <span class="badge badge-ingles">{{ cat }}</span>
                    {% elif cat == 'Electricidad / Electrónica' %}
                <span class="badge badge-electricidad">{{ cat }}</span>
                    {% elif cat == 'Hotelería / Turismo' %}
                <span class="badge badge-hoteleria">{{ cat }}</span>
                    {% elif cat in ['Química','Quimica'] %}
                <span class="badge badge-quimica">{{ cat }}</span>
                    {% elif cat == 'Finanzas' %}
                <span class="badge badge-finanzas">{{ cat }}</span>
                    {% elif cat == 'Artes' %}
                <span class="badge badge-artes">{{ cat }}</span>
                    {% endif %}
        </p>

                
                {# DESCRIPCIÓN (CORRECCIÓN: Se agrega min-height) #}
                <p class="card-text text-muted mb-4 flex-grow-1" style="min-height: 40px;">
                    {{ workshop.description }}
                </p>
                
                {# SECCIÓN 2: DETALLES (FECHA, HORA, LUGAR) #}
                <div class="mt-auto">
                    <div class="workshop-detail">
                        <i class="bi bi-calendar-event"></i> 
                        <span class="fw-bolder me-1">Fecha:</span> <span>{{ workshop.date }}</span>
                    </div>
                    <div class="workshop-detail">
                        <i class="bi bi-clock"></i> 
                        <span class="fw-bolder me-1">Hora:</span> 
                        {% set hour = workshop.time.split(':')[0] | int %}
                        {% set suffix = 'AM' if hour < 12 else 'PM' %}
                        <span>{{ workshop.time }} {{ suffix }}</span>
                    </div>
                    <div class="workshop-detail">
                        <i class="bi bi-geo-alt"></i> 
                        <span class="fw-bolder me-1">Ubicación:</span> 
                        <span>{{ workshop.location }}</span>
                    </div>
                </div>
                
                {# BOTÓN DE INSCRIPCIÓN #}
                <button class="btn btn-inscripcion btn-lg mt-3" 
                        onclick="registerToWorkshop('{{ workshop.id }}')">
                    <i class="bi bi-check-circle me-2"></i> Inscribirme Ahora
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
