{% extends "base.html" %}
{# 
    Este template hereda la estructura base y el Navbar.
    Muestra la lista de talleres disponibles para la inscripción del estudiante.
#}

{% block content %}
<h2 class="mb-5 text-center fw-bold text-white">Inscribete a Nuestros Talleres de Formación</h2> 

<div class="row justify-content-center align-items-start g-4">
    {# Bucle de Jinja para iterar sobre la lista de talleres ('workshops') #}
    {% for workshop in workshops %}
    <div class="col-md-6 col-lg-4 mb-4">
        {# Tarjeta de Bootstrap: usa la clase 'card' personalizada en custom.css #}
        <div class="card h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
                
                {# SECCIÓN 1: ÍCONO DE CATEGORÍA #}
                <div class="text-center mb-3">
                    {% if workshop.category == 'Tecnología' or workshop.category == 'Programación' %}
                        <i class="bi bi-code-slash display-5 text-primary"></i>
                    {% elif workshop.category == 'Habilidades Blandas' %}
                        <i class="bi bi-person-check-fill display-5 text-success"></i>
                    {% elif workshop.category == 'Negocios' %}
                        <i class="bi bi-briefcase-fill display-5 text-info"></i>
                    {% elif workshop.category == 'Inglés' %}
                        <i class="bi bi-translate display-5" style="color: #6c757d;"></i>
                    {% elif workshop.category == 'Electricidad / Electrónica' %}
                        <i class="bi bi-lightning-charge-fill display-5 text-danger"></i>
                    {% elif workshop.category == 'Hotelería / Turismo' %}
                        <i class="bi bi-globe-americas display-5 text-primary"></i>
                    {% elif workshop.category == 'Química' %}
                        <i class="bi bi-flask-fill display-5" style="color: #343a40;"></i>
                    {% else %}
                        <i class="bi bi-book display-5 text-muted"></i>
                    {% endif %}
                </div>

                {# TÍTULO Y BADGE DE CATEGORÍA #}
                <h4 class="card-title text-center mb-1 fw-bold">{{ workshop.name }}</h4>
                
                <p class="text-center mb-3">
                    {% if workshop.category == 'Tecnología' or workshop.category == 'Programación' %}
                        <span class="badge bg-info text-dark">{{ workshop.category }}</span>
                    {% elif workshop.category == 'Habilidades Blandas' %}
                        <span class="badge bg-success">{{ workshop.category }}</span>
                    {% elif workshop.category == 'Negocios' %}
                        <span class="badge bg-warning text-dark">{{ workshop.category }}</span>
                    {% elif workshop.category == 'Inglés' %}
                        <span class="badge bg-secondary">{{ workshop.category }}</span>
                    {% elif workshop.category == 'Electricidad / Electrónica' %}
                        <span class="badge bg-danger">{{ workshop.category }}</span>
                    {% elif workshop.category == 'Hotelería / Turismo' %}
                        <span class="badge bg-primary">{{ workshop.category }}</span>
                    {% elif workshop.category == 'Química' %}
                        <span class="badge bg-dark">{{ workshop.category }}</span>
                    {% else %}
                        <span class="badge bg-light text-dark">Sin Categoría</span>
                    {% endif %}
                </p>
                
                {# DESCRIPCIÓN (CORRECCIÓN: Se agrega min-height) #}
                <p class="card-text text-muted mb-4 flex-grow-1" style="min-height: 40px;">
                    {{ workshop.description }}
                </p>
                
                {# SECCIÓN 2: DETALLES (FECHA, HORA, LUGAR) #}
                <div class="mt-auto">
                    <div class="workshop-detail">
                        <i class="bi bi-calendar-event"></i> 
                        <span class="fw-bolder me-1">Fecha:</span> <span>{{ workshop.date }}</span>
                    </div>
                    <div class="workshop-detail">
                        <i class="bi bi-clock"></i> 
                        <span class="fw-bolder me-1">Hora:</span> 
                        {% set hour = workshop.time.split(':')[0] | int %}
                        {% set suffix = 'AM' if hour < 12 else 'PM' %}
                        <span>{{ workshop.time }} {{ suffix }}</span>
                    </div>
                    <div class="workshop-detail">
                        <i class="bi bi-geo-alt"></i> 
                        <span class="fw-bolder me-1">Ubicación:</span> 
                        <span>{{ workshop.location }}</span>
                    </div>
                </div>
                
                {# BOTÓN DE INSCRIPCIÓN #}
                <button class="btn btn-inscripcion btn-lg mt-3" 
                        onclick="registerToWorkshop('{{ workshop.id }}')">
                    <i class="bi bi-check-circle me-2"></i> Inscribirme Ahora
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
