{% extends "base.html" %}
{# 
    Este template extiende de 'base.html' para heredar la estructura
    del documento, el Navbar y los scripts necesarios. 
#}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-5 pb-3">
    {# T√çTULO PRINCIPAL #}
    <h2 class="fw-bold text-white">Panel de Administraci√≥n de Talleres</h2>
    
    {# BOT√ìN DE ACCI√ìN PRINCIPAL: Crear Nuevo Taller #}
    <button class="btn btn-mint shadow" data-bs-toggle="modal" data-bs-target="#createModal">
        <i class="bi bi-plus-lg me-2"></i> Crear Nuevo Taller
    </button>
</div>

{# TABLA DE GESTI√ìN DE TALLERES #}
<div class="bg-white shadow-sm rounded p-3">
    <table class="table table-striped table-hover">
        <thead class="table-light">
            <tr>
                <th scope="col">Nombre</th>
                <th scope="col">Categor√≠a</th>
                <th scope="col">Fecha y Hora</th>
                <th scope="col">Lugar</th>
                <th scope="col" class="text-center">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {# Bucle de Jinja para iterar sobre la lista de talleres ('workshops') #}
            {% for workshop in workshops %}
            <tr>
                <td class="fw-bold">{{ workshop.name }}</td>
                <td>
                    {# L√ìGICA CONDICIONAL DE JINJA: Asigna un badge (etiqueta) seg√∫n la categor√≠a #}
                    {# Se utilizan clases de Bootstrap (bg-info, bg-success, etc.) para colorear los badges #}
                    {% if workshop.category == 'Tecnolog√≠a' or workshop.category == 'Programaci√≥n' %}
                        <span class="badge bg-info text-dark">üíª {{ workshop.category }}</span>
                    {% elif workshop.category == 'Habilidades Blandas' %}
                        <span class="badge bg-success">ü§ù {{ workshop.category }}</span>
                    {% elif workshop.category == 'Negocios' %}
                        <span class="badge bg-warning text-dark">üìà {{ workshop.category }}</span>
                    {% elif workshop.category == 'Ingl√©s' %}
                        <span class="badge bg-secondary">üåê {{ workshop.category }}</span>
                    {% elif workshop.category == 'Electricidad / Electr√≥nica' %}
                        <span class="badge bg-danger">‚ö° {{ workshop.category }}</span>
                    {% elif workshop.category == 'Hoteler√≠a / Turismo' %}
                        <span class="badge bg-primary">‚úàÔ∏è {{ workshop.category }}</span>
                    {% elif workshop.category == 'Qu√≠mica' %}
                        <span class="badge bg-dark">üß™ {{ workshop.category }}</span>
                    {% else %}
                        <span class="badge bg-light text-dark">‚ùì Sin Categor√≠a</span>
                    {% endif %}
                </td>
                <td>{{ workshop.date }} a las {{ workshop.time }}</td>
                <td>{{ workshop.location }}</td>
                <td class="text-center">
                    {# Bot√≥n de Eliminar: Usa un enlace a la ruta /admin/delete/<id> #}
                    <a href="/admin/delete/{{ workshop.id }}" 
                       class="btn btn-outline-danger btn-sm"
                       {# Confirmaci√≥n de JavaScript antes de enviar la solicitud de eliminaci√≥n #}
                       onclick="return confirm('¬øEst√°s seguro de que deseas eliminar {{ workshop.name }}?');">
                        <i class="bi bi-trash"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


{# MODAL PARA CREAR UN NUEVO TALLER #}
<div class="modal fade" id="createModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/admin/create" method="POST">
                {# Cabecera del Modal (usa el color de Navbar definido en .bg-primary) #}
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title fw-bold">Registrar Nuevo Taller</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                
                <div class="modal-body">
                    {# Campos de formulario #}
                    <input type="text" name="name" class="form-control mb-3" placeholder="Nombre del Taller" required>
                    <textarea name="description" class="form-control mb-3" placeholder="Descripci√≥n" rows="3"></textarea>
                    
                    <label for="date-input" class="form-label fw-bold mt-2">Fecha</label>
                    <input type="date" name="date" id="date-input" class="form-control mb-3" required>
                    
                    <label for="time-input" class="form-label fw-bold">Hora</label>
                    <input type="time" name="time" id="time-input" class="form-control mb-3" required>
                    
                    <input type="text" name="location" class="form-control mb-3" placeholder="Lugar (ej: Sala B3)" required>
                    
                    <label for="category-select" class="form-label fw-bold mt-2">Categor√≠a</label>
                    {# Select de Categor√≠a #}
                    <select name="category" id="category-select" class="form-select mb-3">
                        <option value="Tecnolog√≠a">Tecnolog√≠a</option>
                        <option value="Programaci√≥n">Programaci√≥n</option> 
                        <option value="Habilidades Blandas">Habilidades Blandas</option>
                        <option value="Negocios">Negocios</option> 
                        <option value="Ingl√©s">Ingl√©s</option>
                        <option value="Electricidad / Electr√≥nica">Electricidad / Electr√≥nica</option>
                        <option value="Hoteler√≠a / Turismo">Hoteler√≠a / Turismo</option>
                        <option value="Qu√≠mica">Qu√≠mica</option>
                    </select>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    {# Bot√≥n de env√≠o que usa la clase personalizada 'btn-mint' #}
                    <button type="submit" class="btn btn-mint">Guardar Taller</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
